"use strict";(self.webpackChunkconsumerportal_v2=self.webpackChunkconsumerportal_v2||[]).push([[40],{10040:function(e,o,t){t.r(o),t.d(o,{default:function(){return U}});var r=t(1413),s=t(29439),n=t(72791),a=t(39230),d=t(30681),i=t(26580),c=(t(93941),t(40642)),l=t(42048),u=t(13967),p=t(53767),h=t(36151),m=t(13239),f=t(61336),g=t(61889),x=t(68870),_=t(34030),C=t(81918),w=t(20890),j=t(20696),b=t(28195),v=t(28619),A=t(80806),Z=(t(88216),t(81741)),y=t(9089),k=t(60263),S=t(60151),P=(t(14771),t(11356)),D=t(74131),E=t(24332),M=t(73452),R=t(87634),B=t(99298),L=t(744),O=t(73490),z=t(80184),F=B.custom_page.my_address&&B.custom_page.my_address.add_address&&B.custom_page.my_address.add_address.controller?t(11191).default:M.default,I=B.custom_page.my_address&&B.custom_page.my_address.address_map&&B.custom_page.my_address.address_map.controller?t(93458).default:E.default;function U(e){var o=c.cache.getAppConfig(),t=!!(o&&o.features&&o.features.contact&&o.features.contact.order&&o.features.contact.order.is_supported)&&o.features.contact.order.is_supported,C=!!(o&&o.features&&o.features.contact&&o.features.contact.order&&o.features.contact.order.is_supported&&o.features.contact.order.delivery&&o.features.contact.order.delivery.is_supported),w=!!(o&&o.features&&o.features.contact&&o.features.contact.order&&o.features.contact.order.is_supported&&o.features.contact.order.pick_up&&o.features.contact.order.pick_up.is_supported),S=!!(o&&o.features&&o.features.contact&&o.features.contact.order&&o.features.contact.order.is_supported&&o.features.contact.order.direct_sale&&o.features.contact.order.direct_sale.is_supported),E=(0,a.$G)().t,M=e.my_orders,B=e.currentLocation,L=e.showLoadingMyOrders,U=e.showDrawer,N=e.paging,T=(0,n.useState)(N&&N.size?N.size:10),Y=(0,s.Z)(T,2),W=Y[0],H=Y[1],V=(0,u.Z)().palette;console.log("showDrawer:",U);var X=(0,l.checkActionPermission)(O.enumConfig.contactPermissions.ORDERS_MANAGEMENT);return(0,z.jsxs)(d.default,{showHeader:!0,showProcessing:e.showProcessing,showFooter:!0,message:e.message,subHeader:(0,z.jsx)(i.default,{title:E("orders_title"),variant:"action-buttons",action:(0,z.jsx)(z.Fragment,{children:t&&(0,z.jsxs)(p.Z,{direction:"row",spacing:1,children:[w&&(0,z.jsx)(h.Z,{sx:{borderRadius:32,height:32,padding:void 0,fontFamily:j.commonFont.medium,borderColor:V.border.dark,"&.MuiButtonBase-root:hover":{borderColor:"transparent"}},variant:"outlined",size:"small",disabled:!X,color:"shortcut",onClick:e.onClickPickUp,id:"orderMain/btnPickUp",children:E("pickup")}),C&&(0,z.jsx)(h.Z,{sx:{borderRadius:32,height:32,padding:void 0,fontFamily:j.commonFont.medium,borderColor:V.border.dark,"&.MuiButtonBase-root:hover":{borderColor:"transparent"}},variant:"outlined",size:"small",disabled:!X,color:"shortcut",onClick:e.onClickDelivery,id:"orderMain/btnDelivery",children:E("delivery")}),S&&(0,z.jsx)(h.Z,{sx:{borderRadius:32,height:32,padding:void 0,fontFamily:j.commonFont.medium,borderColor:V.border.dark,"&.MuiButtonBase-root:hover":{borderColor:"transparent"}},variant:"outlined",size:"small",disabled:!X,color:"shortcut",onClick:e.onClickDirectSale,id:"orderMain/btnDirectSale",children:E("order_direct_sale")})]})})}),children:[(0,z.jsx)(v.default,{noBorder:!0,marginTop:3,children:L?(0,z.jsx)("center",{children:(0,z.jsx)(m.Z,{})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(f.Z,{mdDown:!0,children:(0,z.jsx)(b.default,{data:M||[],tableConfig:A.ordersTableConfig,enablePaging:!0,paging:(0,r.Z)((0,r.Z)({},e.paging),{},{size:e.size?e.size:void 0}),handleChangePage:e.handleChangePage,handleChangeRowsPerPage:e.handleChangeRowsPerPage,onReOrder:e.onReOrder,onShowDetail:e.onShowDetail,disabledAction:!X})}),(0,z.jsx)(f.Z,{mdUp:!0,children:(0,z.jsxs)(g.ZP,{xs:12,item:!0,children:[M.map((function(o,t){return(0,z.jsx)(x.Z,{mb:1,children:(0,z.jsx)(G,{item:o,onReOrder:e.onReOrder,isAllowAction:X})},t)})),(0,z.jsx)(_.Z,{component:"div",count:N.total,onPageChange:function(o,t){e.handleChangePage(t+1)},rowsPerPage:W,page:N.page?N.page-1:0,onRowsPerPageChange:function(o){var t=o.target.value,r=N.size?N.size:10;console.log("AAA parseInt(value, _size): ",parseInt(t,r)),H(t),e.handleChangeRowsPerPage(t)}})]})})]})}),e.orderDetail&&(0,z.jsx)(k.default,{orderSelected:e.orderDetail,isOpen:e.showDetail,onClose:function(){return e.setShowDetail(!1)}}),e.showAddresses&&(0,z.jsx)(Z.default,{enableCloseButton:!0,maxWidth:"md",isOpen:e.showAddresses,title:E("select_your_delivery_address"),onClose:function(){return e.setShowAddresses(!1)},children:(0,z.jsx)(y.default,{currentLocation:B,onSelectAddress:e.onSelectAddress,onAddNewAddress:e.onAddNewAddress})}),e.showCurrentLocation&&(0,z.jsx)(Z.default,{enableCloseButton:!0,maxWidth:"md",isOpen:e.showCurrentLocation,title:E("my_address"),onClose:function(){return e.setShowCurrentLocation(!1)},children:(0,z.jsx)(D.default,{currentLocation:B,onGoBack:e.onGoBackFromCurrrentLocation,onSelectAddressMap:e.onSelectAddressMap})}),e.showPickUpStore&&(0,z.jsx)(P.default,{onClose:function(){return e.setShowPickUpStore(!1)},isOpen:e.showPickUpStore,showMessage:e.showMessage,currentLocation:B,onGoBackPickUpStore:e.onGoBackPickUpStore}),e.showAddressMap&&(0,z.jsx)(I,{open:e.showAddressMap,onClose:function(){return e.setShowAddressMap(!1)},onGoBackFn:e.onCloseSelectAddressMap}),e.showAddAddress&&(0,z.jsx)(F,{open:e.showAddAddress,address_info:B&&B.location_detail?B.location_detail:null,mode:"add",onClose:function(){return e.setShowAddAddress(!1)},onRefresh:function(){return e.setShowAddresses(!0)}}),e.showCatalog&&(0,z.jsx)(R.default,{catalogues:e.catalogues,open:e.showCatalog,onClose:function(){return e.setShowCatalog(!1)}})]})}function G(e){var o=e.item,t=e.onReOrder,r=e.isAllowAction,s=(0,a.$G)().t,n=(0,u.Z)().palette,d=c.cache.getCurrency(),i="info";"COMPLETED"==o.state?i="success":"CANCELLED"==o.state?i="error":"NEW"==o.state&&(i="info");var l="info";"PICK_UP"==o.supply_method?l="custom1":"DELIVERY"==o.supply_method?l="custom2":"DIRECT_SALE"==o.supply_method&&(l="custom3");var m=L.dataUtil.createItemsWithComponents(o.items),f=function(e){var o="";return e.forEach((function(e){o=o+e.name+", "})),o&&(o=o.substr(0,o.length-2)),o};return(0,z.jsxs)(v.default,{paddingY:1,paddingX:2,children:[(0,z.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:1,mb:1,children:[(0,z.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:1,flex:1,children:[(0,z.jsx)(C.Z,{size:"small",variant:"customOutlined",sx:{background:n[i].light,color:n[i].main},label:s((0,S.mappingValue)(o.state))}),(0,z.jsx)(C.Z,{size:"small",variant:"customOutlined",sx:{background:n[l].light,color:n[l].main},label:s((0,S.mappingValue)(o.supply_method))})]}),"DIRECT_SALE"!=o.supply_method&&(0,z.jsx)(p.Z,{flex:.3,direction:"row",justifyContent:"flex-end",children:(0,z.jsx)(h.Z,{variant:"text",id:"orders/ReOrder/"+o.number,sx:{paddingY:0},disabled:!r,onClick:function(e){return t(e,o)},children:s("re-order")})})]}),(0,z.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,z.jsx)(p.Z,{flex:1,children:(0,z.jsx)(w.Z,{variant:"body2",children:o.fulfilled_by&&o.fulfilled_by.name?o.fulfilled_by.name:null})}),(0,z.jsx)(p.Z,{flex:.3,direction:"row",justifyContent:"flex-end",children:(0,z.jsxs)(w.Z,{variant:"body2",children:[d,o.total?(0,S.formatAmount)(o.total,O.portal_config.isFormatDecimalBalance):"0.00"]})})]}),(0,z.jsx)(p.Z,{direction:"row",alignItems:"center",spacing:1,children:(0,z.jsx)(p.Z,{flex:1,children:(0,z.jsx)(w.Z,{variant:"subtitle2",children:o.submitted_date?(0,S.formatDateToDDMMYYYYHHSSFrEpoch)(o.submitted_date):null})})}),(0,z.jsx)(x.Z,{mt:.5,children:m.map((function(e,o){return e.product&&"EXPENSES_SERVICE"!=e.product.classification?(0,z.jsxs)(x.Z,{children:[(0,z.jsxs)(p.Z,{direction:"row",children:[(0,z.jsxs)(w.Z,{variant:"subtitle2",component:"span",children:[e.product.quantity," x "]}),(0,z.jsx)(w.Z,{variant:"subtitle2",fontWeight:"bold",component:"span",pl:.5,children:e.product.name})]},o),e.product.components&&e.product.components.length>0?(0,z.jsx)(w.Z,{variant:"subtitle2",children:f(e.product.components)}):null]},o):null}))})]})}}}]);
//# sourceMappingURL=40.d14a3e9e.chunk.js.map