"use strict";(self.webpackChunkconsumerportal_v2=self.webpackChunkconsumerportal_v2||[]).push([[982,497],{5982:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(74165),c=n(15861),r=n(29439),l=n(72791),o=n(40497),s=n(62398),u=n(39230),i=n(40642),d=n(80184);function m(e){var t=(0,u.$G)().t,n=(0,l.useState)(!1),m=(0,r.Z)(n,2),p=m[0],h=m[1],y=(0,l.useState)(null),f=(0,r.Z)(y,2),_=f[0],b=f[1],g=(0,l.useState)([]),v=(0,r.Z)(g,2),x=v[0],A=v[1],Z=(0,l.useState)(null),C=(0,r.Z)(Z,2),w=C[0],S=C[1],E=(0,l.useState)({}),j=(0,r.Z)(E,2),T=j[0],P=j[1],k=(0,l.useState)(null),D=(0,r.Z)(k,2),L=D[0],O=D[1],M=(0,l.useState)(!1),B=(0,r.Z)(M,2),U=B[0],I=B[1],W=(0,l.useState)(null),N=(0,r.Z)(W,2),F=N[0],R=N[1];(0,l.useEffect)((function(){Y(),q()}),[]);var Y=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.default.payment.getListPaymentMethods({support_payouts:!0});case 3:t=e.sent,console.log("AAAA getPaymentMethods result: ",t),"OK"==t.code&&t.data&&t.data.content&&V(t.data.content),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("AAAA getPaymentMethods error: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.prev=1,t=i.cache.getWalletId(),e.next=5,s.default.wallet.getWallet(t);case 5:"OK"===(n=e.sent).code&&(R(n.data),i.cache.setWalletId(n.data.id)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("onLoadWallet error:",e.t0);case 12:I(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),V=function(e){var t=!1,n=[],a=[],c=[],r=[],l=null;e&&e.length>0&&(1==e.length&&(l=e[0]),e.forEach((function(e){"CARD"==e.payment_method_type&&c.push(e),"ACCOUNT_DEBIT"==e.payment_method_type&&a.push(e),"WALLET"==e.payment_method_type&&r.push(e),e.payment_method_type&&!n.includes(e.payment_method_type)&&n.push(e.payment_method_type)}))),n&&n.length>0&&(n.length>1?t=!0:(t=!1,S(n[0])));var o={multiplePaymentMethodTypes:t,paymentMethodTypes:n,cards:c,accountDebits:a,wallets:r,paymentMethod:l};return console.log("AAAA _groupInfo: ",o),P({cards:c,accountDebits:a,wallets:r}),A(n),l&&O(l),o},G=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var c,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),console.log("AAAA onSubmit values: ",n),e.prev=2,c={amount:n.amount},L&&w&&(c.payment_method={type:w,id:L}),e.next=7,s.default.payouts.createPayout(c);case 7:if(r=e.sent,console.log("AAAA onSubmit result: ",r),"OK"!=r.code){e.next=15;break}return e.next=12,K();case 12:H({status:!0,message:t("REQUEST_PAYOUT_SUCCESS")}),e.next=16;break;case 15:H({status:!0,message:t("REQUEST_PAYOUT_FAILED")});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),console.log("AAAA onSubmit error: ",e.t0),H({status:!0,message:t("EXCEPTION_PROCESS")});case 22:h(!1);case 23:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t=e.status,n=e.title,a=e.message,c=e.otherMessage,r=e.callBackFn;h(!1),b({show:t,title:n,content:a,otherMessage:c,callBackFn:r||function(){return b({})}})},K=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Y(),q();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(o.default,{isOpen:e.isOpen,showProcessing:p,message:_,paymentMethodTypes:x,type:w,paymentMethods:T,paymentMethod:L,wallet:F,showLoadWallet:U,onClose:e.onClose,setPaymentMethod:O,setType:S,onSubmit:G,onHandleChange:function(e,t){"type"==e&&S(t),"payment_method"==e&&O(t)}})})}},40497:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var a=n(1413),c=n(61889),r=n(13239),l=n(53767),o=n(20890),s=n(36151),u=(n(72791),n(63720)),i=n(39230),d=n(88216),m=n(55807),p=n(73490),h=n(40642),y=n(42048),f=n(60151),_=n(68610),b=n(744),g=n(80184);function v(e){var t=(0,i.$G)().t,n=e.paymentMethods,v=e.type,x=e.paymentMethodTypes,A=e.wallet,Z=e.showLoadWallet,C=h.cache.getCurrencyCode(),w=[],S=[];if(x&&x.length>1&&x.forEach((function(e){"CARD"===e&&w.push({label:t("card"),value:"CARD"}),"ACCOUNT_DEBIT"===e&&w.push({label:t("account_debit"),value:"ACCOUNT_DEBIT"}),"WALLET"===e&&w.push({label:t("wallet"),value:"WALLET"})})),n){if("CARD"===v&&n.cards){var E=[];n.cards.forEach((function(e){var t=null;e.card&&e.card.last4&&(t="****"+e.card.last4),t&&E.push((0,a.Z)((0,a.Z)({},e),{},{label:t}))})),S=E}if("WALLET"===v&&n.wallets){var j=[];n.wallets.forEach((function(e){var t=null;e.wallet&&e.wallet.email?t=e.wallet.email:e.wallet&&e.wallet.phone&&e.wallet.phone.number&&(t=e.wallet.phone.number),t&&j.push((0,a.Z)((0,a.Z)({},e),{},{label:t}))})),S=j}if("ACCOUNT_DEBIT"===v&&n.accountDebits){var T=[];n.accountDebits.forEach((function(e){var t=e.account_debit&&e.account_debit.account_name?e.account_debit.account_name:null;if(e.account_debit){if("EUR"===C)if(e.account_debit.iban)t=e.account_debit.iban.substr(0,4)+" **** **** **** **** "+e.account_debit.iban.substr(e.account_debit.iban.length-4,e.account_debit.iban.length);"GBP"===C&&(t=e.account_debit.account_number?e.account_debit.account_number:""),"USD"===C&&(t=e.account_debit.account_number?e.account_debit.account_number:"")}t&&T.push((0,a.Z)((0,a.Z)({},e),{},{label:t}))})),S=T}}var P=h.cache.getCurrency(),k=h.cache.getCurrencyCode(),D=A?b.dataUtil.getBalanceByType(A.balances,!0):null,L=D?D.currency_code?(0,y.getCurrencySymbol)(D.currency_code):P:null,O=A?b.dataUtil.getBalanceByType(A.balances,!1,D.currency_code?D.currency_code:k):null,M=O?O.currency_code?(0,y.getCurrencySymbol)(O.currency_code):P:null;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(d.default,{isOpen:e.isOpen,onClose:e.onClose,title:t("request_payout"),message:e.message,showProcessing:e.showProcessing,children:(0,g.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,g.jsx)("center",{children:Z?(0,g.jsx)(r.Z,{}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(l.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,g.jsxs)(l.Z,{flex:1,children:[(0,g.jsxs)(o.Z,{variant:"h3",children:[L,D&&D.open?(0,f.formatAmount)(D.open,p.portal_config.isFormatDecimalBalance):"0.00"]}),(0,g.jsx)(o.Z,{variant:"subtitle2",children:t("any_where")})]}),(0,g.jsxs)(l.Z,{flex:1,children:[(0,g.jsxs)(o.Z,{variant:"h3",children:[M,O&&O.total?(0,f.formatAmount)(O.total,p.portal_config.isFormatDecimalBalance):"0.00"]}),(0,g.jsx)(o.Z,{variant:"subtitle2",children:t("cash_pocket")})]})]})})}),(0,g.jsx)(u.l0,{onSubmit:e.onSubmit,render:function(n){var a=n.handleSubmit;return(0,g.jsxs)(c.ZP,{item:!0,xs:12,children:[w&&w.length>1&&(0,g.jsx)(c.ZP,{item:!0,xs:12,marginY:2,children:(0,g.jsx)(u.gN,{name:"type",component:m.SelectCustom,isEdit:!0,isValid:!0,selectData:w,placeholder:" ",label:t("select_your_payment_method_type"),onSelectedChange:function(t){return e.onHandleChange("type",t.target.value)}})}),(0,g.jsx)(c.ZP,{item:!0,xs:12,marginY:2,children:(0,g.jsx)(u.gN,{name:"payment_method",component:m.SelectCustom,placeholder:" ",label:t("select_your_payment_method"),isEdit:!0,isValid:!0,selectData:S,keyName:"id",keyLabel:"label",onSelectedChange:function(t){return e.onHandleChange("payment_method",t.target.value)}})}),(0,g.jsx)(c.ZP,{item:!0,xs:12,marginY:2,children:(0,g.jsx)(u.gN,{name:"amount",label:t("request_payout_amount"),component:m.NumbericInputCustom,isEdit:!0,isValid:!0,validate:_.default.composeValidators(_.default.required),customLabel:"wallet",formatType:"currency"})}),(0,g.jsx)(c.ZP,{item:!0,xs:12,marginY:3,children:(0,g.jsx)(s.Z,{id:"requestPayout/btnSubmit",size:"large",fullWidth:!0,variant:"contained",onClick:a,type:"submit",children:t("btn_submit")})})]})}})]})})})}}}]);
//# sourceMappingURL=982.4a9105c1.chunk.js.map