{"version":3,"file":"static/js/960.fc39dd48.chunk.js","mappings":"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","sources":["pages/my-cards/MyCardsController.js","pages/my-cards/MyCardsView.js"],"sourcesContent":["import MyCardsView from './MyCardsView'\r\nimport crmservices from '../../wsclient';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { config_path } from '../../router/config.path';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { custom_page } from '../../custom.config';\r\n\r\nconst MyCardsPage = custom_page.my_card && custom_page.my_card.view ? require('../../custom_src/pages/my-cards/MyCardsView').default : MyCardsView\r\n//TODO Deprecated file-Not deleted due to custom page implementation\r\nexport default function MyCardsController(props){\r\n    const { t } = useTranslation();\r\n    const navigate = useNavigate();\r\n    const [cards, setCards] = useState(null);\r\n    const [showLoading, setShowLoading] = useState(false);\r\n    const [showProcessing, setShowProcessing] = useState(false);\r\n    const [message, setMessage] = useState(null);\r\n    const [isRefresh, setRefreshing] = useState(false);\r\n    const [showAddCardForm, setShowAddCardForm] = useState(false);\r\n\r\n    useEffect(() => {\r\n        getCards();\r\n    }, [])\r\n\r\n    const getCards = async (isRefresh) => {\r\n        // setShowProcessing(true);\r\n        setShowLoading(isRefresh ? false : true);\r\n        try {\r\n            var result = await crmservices.payment.getListPaymentMethods();\r\n            if (result.code == 'OK') {\r\n                setCards(result.data.content);\r\n            }\r\n        } catch (error) {\r\n            console.log(\"AAAA getCards exception:\", error);\r\n        }\r\n        setShowLoading(false);\r\n        // setShowProcessing(false);\r\n    }\r\n\r\n    const onRefresh = async () => {\r\n        setRefreshing(true);\r\n        await getCards(true);\r\n        setRefreshing(false);\r\n    }\r\n\r\n    const onSetPrimaryCard = async (card) => {\r\n        setShowProcessing(true);\r\n        try {\r\n            var result = await crmservices.payment.setPrimaryCard(card.id);\r\n\r\n            if (result.code == 'OK') {\r\n                await getCards(true);\r\n                showMessage({ status: true, message: t('SET_PRIMARY_METHOD_SUCCESS') });\r\n            } else {\r\n                showMessage({ status: true, message: t('EXCEPTION_PROCESS') });\r\n            }\r\n        } catch (error) {\r\n            showMessage({ status: true, message: t('EXCEPTION_PROCESS') });\r\n        }\r\n        setShowProcessing(false);\r\n    }\r\n\r\n    const onRemoveCard = async (card) => {\r\n        try {\r\n            setShowProcessing(true)\r\n            var result = await crmservices.payment.removePaymentMethod(card.id);\r\n            if (result.code == 'OK') {\r\n                await getCards(true);\r\n                showMessage({status: true, message: t('REMOVE_CARD_SUCCESS')});\r\n            } else {\r\n                showMessage({status: true, message: t('FAILED_TO_REMOVE_PAYMENT_METHOD')});\r\n            }\r\n            \r\n        } catch (ex) {\r\n            console.log(\"remove card exception:\", ex);\r\n            showMessage({status: true, message: t('EXCEPTION_PROCESS')});\r\n        }\r\n        setShowProcessing(false);\r\n    }\r\n\r\n    const onShowAddCardForm = async () => {\r\n        if (showAddCardForm) {\r\n            await getCards();\r\n            // setShowAddCardForm(!showAddCardForm);\r\n            // setShowProcessing(false);\r\n        // }else{\r\n        //     if(app_config.limitAllowCards!= undefined && cards.length >= app_config.limitAllowCards){\r\n        //         showMessage({status: true, message: t('MAXIMUM_CARD_EXCEPTION')});\r\n        //     }else{\r\n        //         setShowAddCardForm(!showAddCardForm);\r\n        //     }\r\n        }\r\n        setShowAddCardForm(!showAddCardForm);\r\n        // setShowProcessing(!showProcessing);\r\n    }\r\n\r\n    const onAddCardRewards = () => {\r\n        // if(app_config.limitAllowCards!= undefined && cards.length >= app_config.limitAllowCards){\r\n        //     showMessage({status: true, title: strings.ERROR, message: strings.MAXIMUM_CARD_EXCEPTION});\r\n        // }else{\r\n        //     navigation.navigate(config_path.add_card_reward)\r\n        // }\r\n        navigate(config_path.add_card_reward)\r\n    }\r\n\r\n    const showMessage = ({ status, title, message, otherMessage, callBackFn }) => {\r\n        setShowProcessing(false);\r\n        setShowLoading(false);\r\n        setMessage({ show: status, title: title, content: message, otherMessage, callBackFn: callBackFn ? callBackFn : () => setMessage({}) });\r\n    }\r\n\r\n    return (\r\n        <MyCardsPage\r\n            open = {props.open}\r\n            onClose = {props.onClose}\r\n            cards = {cards}\r\n            showLoading={showLoading}\r\n            showProcessing={showProcessing}\r\n            message={message}\r\n            isRefresh={isRefresh}\r\n            showAddCardForm={showAddCardForm}\r\n            onRefresh={onRefresh}\r\n            onSetPrimaryCard={onSetPrimaryCard}\r\n            onRemoveCard={onRemoveCard}\r\n            onShowAddCardForm={onShowAddCardForm}\r\n            // onAddCardRewards={onAddCardRewards}\r\n        />\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Box, CircularProgress, Grid, Typography, Stack, IconButton, useTheme, ListItem, Button, Chip} from '@mui/material'\r\nimport { useTranslation } from 'react-i18next'\r\nimport Container from '../../components/Container'\r\nimport SubHeader from '../../components/SubHeader'\r\nimport { cache } from '../../utils/cache'\r\nimport { DefaultCardIcon, DeleteIcon, MyCardMainIcon, RadioCheckedIcon, RadioIcon, RemoveIcon } from '../../components/IconComponent'\r\nimport AddCardController from './AddCardController'\r\nimport DrawerComponent from '../../components/Drawer'\r\nimport { custom_page } from '../../custom.config';\r\nimport { getCardIcon } from '../../utils/util'\r\n//TODO Deprecated file-Not deleted due to custom page implementation\r\n\r\nconst AddCardsPage = custom_page.add_card && custom_page.add_card.controller ? require('../../custom_src/pages/my-cards/AddCardController').default : AddCardController;\r\nconst JCC = 'JCC';\r\nexport default function MyCardsView(props){\r\n    const appConfig = cache.getAppConfig();\r\n    const { t } = useTranslation();\r\n    const { palette } = useTheme();\r\n    const { cards, } = props;\r\n    const [showRemoveCardOrder, setShowRemoveCardOrder] = useState(false);\r\n\r\n    let isRewards = appConfig && appConfig.features && appConfig.features.contact && appConfig.features.contact.reward && appConfig.features.contact.reward.is_supported ? appConfig.features.contact.reward.is_supported : false;\r\n    let isOrders = appConfig && appConfig.features && appConfig.features.contact && appConfig.features.contact.order && appConfig.features.contact.order.is_supported ? appConfig.features.contact.order.is_supported : false;\r\n    let return_cashback = appConfig && appConfig.features && appConfig.features.contact && appConfig.features.contact.reward && appConfig.features.contact.reward.return_cashback;\r\n    if (return_cashback) {\r\n        isRewards = true;\r\n    } else {\r\n        isRewards = false;\r\n    }\r\n    \r\n\r\n    return(\r\n        <>\r\n            <DrawerComponent title={t('my_cards')} isOpen={props.open} onClose={props.onClose} showProcessing={props.showProcessing} message={props.message}>\r\n                {isOrders && <Box>\r\n                    <Grid item direction={'row'} my={4} container xs={12}>\r\n                        <Grid item xs={12} container alignContent={'center'}>\r\n                            <Typography variant='h6'>{t('my_cards_orders')}</Typography>\r\n                        </Grid>\r\n                        <Grid item xs={12} container justifyContent={'flex-end'} alignContent={'center'}>\r\n                            <IconButton sx={{ background: 'transparent'}} onClick={()=>setShowRemoveCardOrder((prev)=>(!prev))}>\r\n                                {showRemoveCardOrder?<Typography>Done</Typography>:<DeleteIcon color=\"#8D3395\"/>}\r\n                            </IconButton>\r\n                        </Grid>\r\n                    </Grid>\r\n                    {props.showLoading && <Grid item justifyContent={'center'} container><CircularProgress marginTop={0.5} size={'1.75rem'} /></Grid> }\r\n                    {cards && cards.map((item, index)=>{\r\n                        let gatewayToken = item.card && item.card.gateway_token && item.card.gateway_token.length > 0 ? item.card.gateway_token[0] : null;\r\n                        if (gatewayToken && gatewayToken.gateway === JCC)\r\n                        return(\r\n                            <ListItem key={index} sx={{ borderBottom: index == cards.length - 1 ? 'none' : '1px solid', borderColor: '#f1f1f1'}}>\r\n                                <Grid item xs={12} direction={'row'} container >\r\n                                    <Grid item xs={10} container alignContent={'center'}>\r\n                                        {item.card && item.card.brand ? getCardIcon(item.card.brand) : <DefaultCardIcon />}\r\n                                        <Typography marginLeft={5} variant='h6' sx={{ display: 'flex', alignItems: 'center'}}>**** {item.card?item.card.last4:''} {item.is_primary && <Typography paddingLeft={1} variant='subtitle2' color={palette.success.main} component={'span'}>Primary</Typography>}</Typography>\r\n                                    </Grid>\r\n                                    <Grid item xs={2} container justifyContent={'flex-end'} alignContent={'center'}>\r\n                                        <IconButton sx={{background:'transparent'}} disabled={!showRemoveCardOrder && item.is_primary}\r\n                                            onClick={showRemoveCardOrder ? () => props.onRemoveCard(item) : () => props.onSetPrimaryCard(item)}\r\n                                        >\r\n                                            {showRemoveCardOrder ? <RemoveIcon color={palette.error.main}/> : (item.is_primary ? <RadioCheckedIcon /> : <RadioIcon />)}\r\n                                        </IconButton>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </ListItem>\r\n                        )\r\n                    })}\r\n                    <Button id='myCards/btnAddACardOrder' variant='contained' fullWidth='true' sx={{marginTop:4, borderRadius: 4}} onClick={props.onShowAddCardForm}>{t('add_a_card')}</Button>\r\n                </Box>}\r\n\r\n                {isRewards && <Box>\r\n                    <Grid item direction={'row'} my={4} container xs={12}>\r\n                        <Grid item xs={12} container alignContent={'center'}>\r\n                            <Typography variant='h6'>{t('my_cards_rewards')}</Typography>\r\n                        </Grid>\r\n                        <Grid item xs={12} container justifyContent={'flex-end'} alignContent={'center'}>\r\n                            <IconButton sx={{ background: 'transparent'}} onClick={()=>setShowRemoveCardOrder((prev)=>(!prev))}>\r\n                                {showRemoveCardOrder?<Typography>Done</Typography>:<DeleteIcon color=\"#8D3395\"/>}\r\n                            </IconButton>\r\n                        </Grid>\r\n                    </Grid>\r\n                    {props.showLoading && <Grid item justifyContent={'center'} container><CircularProgress marginTop={0.5} size={'1.75rem'} /></Grid> }\r\n                    {cards && cards.map((item, index)=>{\r\n                        let gatewayToken = item.card && item.card.gateway_token && item.card.gateway_token.length > 0 ? item.card.gateway_token[0] : null;\r\n                        if (gatewayToken && gatewayToken.gateway === 'JCC_MERCHANT')\r\n                        return(\r\n                            <ListItem key={index} sx={{ borderBottom: index == cards.length - 1 ? 'none' : '1px solid', borderColor: '#f1f1f1'}}>\r\n                                <Grid item direction={'row'} container >\r\n                                    <Grid item xs={12} container alignContent={'center'}>\r\n                                        {item.card && item.card.brand ? getCardIcon(item.card.brand) : <DefaultCardIcon />}\r\n                                        <Typography marginLeft={5} variant='h6' sx={{ display: 'flex', alignItems: 'center'}}>**** {item.card?item.card.last4:''} {item.is_primary && <Typography paddingLeft={1} variant='subtitle2' color={palette.success.main} component={'span'}>Primary</Typography>}</Typography>\r\n                                    </Grid>\r\n                                    <Grid item xs={12} container justifyContent={'flex-end'} alignContent={'center'}>\r\n                                        <IconButton sx={{background:'transparent'}} disabled={!showRemoveCardOrder && item.is_primary}\r\n                                            onClick={showRemoveCardOrder ? () => props.onRemoveCard(item) : () => props.onSetPrimaryCard(item)}\r\n                                        >\r\n                                            {showRemoveCardOrder ? <RemoveIcon color={palette.error.main}/> : (item.is_primary ? <RadioCheckedIcon /> : <RadioIcon />)}\r\n                                        </IconButton>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </ListItem>\r\n                        )\r\n                    })}\r\n                    <Button id='myCards/btnAddACardReward' variant='contained' fullWidth={true} sx={{marginTop:4, borderRadius: 4}} onClick={props.onShowAddCardForm}>{t('add_a_card')}</Button>\r\n                </Box>}\r\n\r\n            </DrawerComponent>\r\n            \r\n            {props.showAddCardForm && <AddCardsPage \r\n                isOpen={props.showAddCardForm}\r\n                onClose={props.onShowAddCardForm}\r\n            />}\r\n            \r\n        </>\r\n    )\r\n}"],"names":["MyCardsPage","custom_page","my_card","view","require","MyCardsView","MyCardsController","props","t","useTranslation","_useState","useNavigate","useState","_useState2","_slicedToArray","cards","setCards","_useState3","_useState4","showLoading","setShowLoading","_useState5","_useState6","showProcessing","setShowProcessing","_useState7","_useState8","message","setMessage","_useState9","_useState10","isRefresh","setRefreshing","_useState11","_useState12","showAddCardForm","setShowAddCardForm","useEffect","getCards","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_context","prev","next","crmservices","payment","getListPaymentMethods","sent","code","data","content","t0","console","log","stop","_x","apply","arguments","onRefresh","_ref2","_callee2","_context2","onSetPrimaryCard","_ref3","_callee3","card","_context3","setPrimaryCard","id","showMessage","status","_x2","onRemoveCard","_ref4","_callee4","_context4","removePaymentMethod","_x3","onShowAddCardForm","_ref5","_callee5","_context5","_ref6","title","otherMessage","callBackFn","show","_jsx","open","onClose","AddCardsPage","add_card","controller","AddCardController","JCC","appConfig","cache","getAppConfig","palette","useTheme","showRemoveCardOrder","setShowRemoveCardOrder","isRewards","features","contact","reward","is_supported","isOrders","order","return_cashback","_jsxs","_Fragment","children","DrawerComponent","isOpen","Box","Grid","item","direction","my","container","xs","alignContent","Typography","variant","justifyContent","IconButton","sx","background","onClick","DeleteIcon","color","CircularProgress","marginTop","size","map","index","gatewayToken","gateway_token","length","gateway","ListItem","borderBottom","borderColor","brand","getCardIcon","DefaultCardIcon","marginLeft","display","alignItems","last4","is_primary","paddingLeft","success","main","component","disabled","RemoveIcon","error","RadioCheckedIcon","RadioIcon","Button","fullWidth","borderRadius"],"sourceRoot":""}