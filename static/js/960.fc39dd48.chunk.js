"use strict";(self.webpackChunkconsumerportal_v2=self.webpackChunkconsumerportal_v2||[]).push([[960,907],{10960:function(e,n,r){r.r(n),r.d(n,{default:function(){return m}});var t=r(74165),a=r(15861),s=r(29439),c=r(20907),o=r(62398),i=r(72791),d=r(39230),u=(r(33098),r(57689)),l=r(99298),f=r(80184),x=l.custom_page.my_card&&l.custom_page.my_card.view?r(27768).default:c.default;function m(e){var n=(0,d.$G)().t,r=((0,u.s0)(),(0,i.useState)(null)),c=(0,s.Z)(r,2),l=c[0],m=c[1],p=(0,i.useState)(!1),h=(0,s.Z)(p,2),C=h[0],g=h[1],Z=(0,i.useState)(!1),j=(0,s.Z)(Z,2),_=j[0],y=j[1],w=(0,i.useState)(null),v=(0,s.Z)(w,2),k=v[0],P=v[1],b=(0,i.useState)(!1),S=(0,s.Z)(b,2),R=S[0],E=S[1],A=(0,i.useState)(!1),I=(0,s.Z)(A,2),O=I[0],T=I[1];(0,i.useEffect)((function(){D()}),[]);var D=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!n),e.prev=1,e.next=4,o.default.payment.getListPaymentMethods();case 4:"OK"==(r=e.sent).code&&m(r.data.content),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("AAAA getCards exception:",e.t0);case 11:g(!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(n){return e.apply(this,arguments)}}(),F=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,D(!0);case 3:E(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,o.default.payment.setPrimaryCard(r.id);case 4:if("OK"!=e.sent.code){e.next=11;break}return e.next=8,D(!0);case 8:B({status:!0,message:n("SET_PRIMARY_METHOD_SUCCESS")}),e.next=12;break;case 11:B({status:!0,message:n("EXCEPTION_PROCESS")});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),B({status:!0,message:n("EXCEPTION_PROCESS")});case 17:y(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,o.default.payment.removePaymentMethod(r.id);case 4:if("OK"!=e.sent.code){e.next=11;break}return e.next=8,D(!0);case 8:B({status:!0,message:n("REMOVE_CARD_SUCCESS")}),e.next=12;break;case 11:B({status:!0,message:n("FAILED_TO_REMOVE_PAYMENT_METHOD")});case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("remove card exception:",e.t0),B({status:!0,message:n("EXCEPTION_PROCESS")});case 18:y(!1);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=3;break}return e.next=3,D();case 3:T(!O);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){var n=e.status,r=e.title,t=e.message,a=e.otherMessage,s=e.callBackFn;y(!1),g(!1),P({show:n,title:r,content:t,otherMessage:a,callBackFn:s||function(){return P({})}})};return(0,f.jsx)(x,{open:e.open,onClose:e.onClose,cards:l,showLoading:C,showProcessing:_,message:k,isRefresh:R,showAddCardForm:O,onRefresh:F,onSetPrimaryCard:M,onRemoveCard:L,onShowAddCardForm:N})}},20907:function(e,n,r){r.r(n),r.d(n,{default:function(){return w}});var t=r(29439),a=r(72791),s=r(13967),c=r(68870),o=r(61889),i=r(20890),d=r(13400),u=r(13239),l=r(15021),f=r(36151),x=r(39230),m=(r(30681),r(26580),r(40642)),p=r(81289),h=r(6992),C=r(88216),g=r(99298),Z=r(60151),j=r(80184),_=g.custom_page.add_card&&g.custom_page.add_card.controller?r(51678).default:h.default,y="JCC";function w(e){var n=m.cache.getAppConfig(),r=(0,x.$G)().t,h=(0,s.Z)().palette,g=e.cards,w=(0,a.useState)(!1),v=(0,t.Z)(w,2),k=v[0],P=v[1],b=!!(n&&n.features&&n.features.contact&&n.features.contact.reward&&n.features.contact.reward.is_supported)&&n.features.contact.reward.is_supported,S=!!(n&&n.features&&n.features.contact&&n.features.contact.order&&n.features.contact.order.is_supported)&&n.features.contact.order.is_supported;return b=!!(n&&n.features&&n.features.contact&&n.features.contact.reward&&n.features.contact.reward.return_cashback),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(C.default,{title:r("my_cards"),isOpen:e.open,onClose:e.onClose,showProcessing:e.showProcessing,message:e.message,children:[S&&(0,j.jsxs)(c.Z,{children:[(0,j.jsxs)(o.ZP,{item:!0,direction:"row",my:4,container:!0,xs:12,children:[(0,j.jsx)(o.ZP,{item:!0,xs:12,container:!0,alignContent:"center",children:(0,j.jsx)(i.Z,{variant:"h6",children:r("my_cards_orders")})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},onClick:function(){return P((function(e){return!e}))},children:k?(0,j.jsx)(i.Z,{children:"Done"}):(0,j.jsx)(p.DeleteIcon,{color:"#8D3395"})})})]}),e.showLoading&&(0,j.jsx)(o.ZP,{item:!0,justifyContent:"center",container:!0,children:(0,j.jsx)(u.Z,{marginTop:.5,size:"1.75rem"})}),g&&g.map((function(n,r){var t=n.card&&n.card.gateway_token&&n.card.gateway_token.length>0?n.card.gateway_token[0]:null;if(t&&t.gateway===y)return(0,j.jsx)(l.ZP,{sx:{borderBottom:r==g.length-1?"none":"1px solid",borderColor:"#f1f1f1"},children:(0,j.jsxs)(o.ZP,{item:!0,xs:12,direction:"row",container:!0,children:[(0,j.jsxs)(o.ZP,{item:!0,xs:10,container:!0,alignContent:"center",children:[n.card&&n.card.brand?(0,Z.getCardIcon)(n.card.brand):(0,j.jsx)(p.DefaultCardIcon,{}),(0,j.jsxs)(i.Z,{marginLeft:5,variant:"h6",sx:{display:"flex",alignItems:"center"},children:["**** ",n.card?n.card.last4:""," ",n.is_primary&&(0,j.jsx)(i.Z,{paddingLeft:1,variant:"subtitle2",color:h.success.main,component:"span",children:"Primary"})]})]}),(0,j.jsx)(o.ZP,{item:!0,xs:2,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},disabled:!k&&n.is_primary,onClick:k?function(){return e.onRemoveCard(n)}:function(){return e.onSetPrimaryCard(n)},children:k?(0,j.jsx)(p.RemoveIcon,{color:h.error.main}):n.is_primary?(0,j.jsx)(p.RadioCheckedIcon,{}):(0,j.jsx)(p.RadioIcon,{})})})]})},r)})),(0,j.jsx)(f.Z,{id:"myCards/btnAddACardOrder",variant:"contained",fullWidth:"true",sx:{marginTop:4,borderRadius:4},onClick:e.onShowAddCardForm,children:r("add_a_card")})]}),b&&(0,j.jsxs)(c.Z,{children:[(0,j.jsxs)(o.ZP,{item:!0,direction:"row",my:4,container:!0,xs:12,children:[(0,j.jsx)(o.ZP,{item:!0,xs:12,container:!0,alignContent:"center",children:(0,j.jsx)(i.Z,{variant:"h6",children:r("my_cards_rewards")})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},onClick:function(){return P((function(e){return!e}))},children:k?(0,j.jsx)(i.Z,{children:"Done"}):(0,j.jsx)(p.DeleteIcon,{color:"#8D3395"})})})]}),e.showLoading&&(0,j.jsx)(o.ZP,{item:!0,justifyContent:"center",container:!0,children:(0,j.jsx)(u.Z,{marginTop:.5,size:"1.75rem"})}),g&&g.map((function(n,r){var t=n.card&&n.card.gateway_token&&n.card.gateway_token.length>0?n.card.gateway_token[0]:null;if(t&&"JCC_MERCHANT"===t.gateway)return(0,j.jsx)(l.ZP,{sx:{borderBottom:r==g.length-1?"none":"1px solid",borderColor:"#f1f1f1"},children:(0,j.jsxs)(o.ZP,{item:!0,direction:"row",container:!0,children:[(0,j.jsxs)(o.ZP,{item:!0,xs:12,container:!0,alignContent:"center",children:[n.card&&n.card.brand?(0,Z.getCardIcon)(n.card.brand):(0,j.jsx)(p.DefaultCardIcon,{}),(0,j.jsxs)(i.Z,{marginLeft:5,variant:"h6",sx:{display:"flex",alignItems:"center"},children:["**** ",n.card?n.card.last4:""," ",n.is_primary&&(0,j.jsx)(i.Z,{paddingLeft:1,variant:"subtitle2",color:h.success.main,component:"span",children:"Primary"})]})]}),(0,j.jsx)(o.ZP,{item:!0,xs:12,container:!0,justifyContent:"flex-end",alignContent:"center",children:(0,j.jsx)(d.Z,{sx:{background:"transparent"},disabled:!k&&n.is_primary,onClick:k?function(){return e.onRemoveCard(n)}:function(){return e.onSetPrimaryCard(n)},children:k?(0,j.jsx)(p.RemoveIcon,{color:h.error.main}):n.is_primary?(0,j.jsx)(p.RadioCheckedIcon,{}):(0,j.jsx)(p.RadioIcon,{})})})]})},r)})),(0,j.jsx)(f.Z,{id:"myCards/btnAddACardReward",variant:"contained",fullWidth:!0,sx:{marginTop:4,borderRadius:4},onClick:e.onShowAddCardForm,children:r("add_a_card")})]})]}),e.showAddCardForm&&(0,j.jsx)(_,{isOpen:e.showAddCardForm,onClose:e.onShowAddCardForm})]})}}}]);
//# sourceMappingURL=960.fc39dd48.chunk.js.map